{"version":3,"file":"static/webpack/static/development/pages/compains/requests.js.e2efdc917f545013c101.hot-update.js","sources":["webpack:///./pages/compains/requests/index.js"],"sourcesContent":["import React,{Component} from 'react';\nimport {Link} from '../../../routes';\nimport {Button,Table} from 'semantic-ui-react';\nimport Layout from '../../../components/Layout';\nimport Compain from '../../../ethereum/compain';\nimport RequestRow from '../../../components/RequestRow';\nclass CompainRequest extends Component{\n\nstatic async getInitialProps(props){\n  const {address} = props.query;\n  const compain = Compain(address);\n  const requestCount = await compain.methods.getRequestCount().call();\n  const approversCount =await compain.methods.approversCount().call();//总的投资人数量\n  const requests = await Promise.all(\n    Array(parseInt(requestCount)).fill().map((element,index)=>{\n      return compain.methods.requests(index).call();\n    })\n  )\n\n  return {address,requests,approversCount};\n}\n\n  renderRow(){\n    return this.props.requests.map((request,index)=>{\n      return (\n        <RequestRow key={index} id={index} request={request} address={this.props.address}></RequestRow>\n      );\n    });\n  }\n\n\n  render(){\n    // console.log(this.props.requests);\n    const {HeaderCell,Row,Header} = Table;\n    return (\n\n      <Layout>\n    <h1>请求列表</h1>\n    <Link route={`/compains/${this.props.address}/requests/new`}>\n    <Button primary>增加请求</Button>\n    </Link>\n\n    <Table>\n        <Table.Header>\n          <Table.Row>\n          <Table.HeaderCell>ID</Table.HeaderCell>\n          <Table.HeaderCell>描述</Table.HeaderCell>\n          <Table.HeaderCell>总的金额</Table.HeaderCell>\n          <Table.HeaderCell>受益人地址</Table.HeaderCell>\n            <Table.HeaderCell>同意的数量</Table.HeaderCell>\n          <Table.HeaderCell>是否同意</Table.HeaderCell>\n          <Table.HeaderCell>是否完成</Table.HeaderCell>\n          </Table.Row>\n        </Table.Header>\n\n        <Table.Body>\n        { this.renderRow() }\n    </Table.Body>\n\n</Table>\n    </Layout>\n    );\n  }\n}\nexport default CompainRequest;\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;;;;;;;;;;;;;AAgBA;AAAA;AACA;AAAA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;;;AAGA;AACA;AADA;AAAA;AAAA;AAGA;AAIA;AAAA;AACA;AAAA;AAuBA;;;;;;AAtDA;;;;;;AACA;AACA;;AACA;AACA;;AADA;;AACA;AACA;;AADA;;AACA;AAEA;AACA;AACA;;AAJA;AAMA;AAAA;AAAA;AAAA;AAAA;AACA;;;;;;;;;;;;;;;;;;AAdA;AACA;AAyDA;;;;A","sourceRoot":""}